(this["webpackJsonptbf-db-reactjs"]=this["webpackJsonptbf-db-reactjs"]||[]).push([[4],{53:function(e,a,t){},56:function(e,a,t){"use strict";t.r(a),t.d(a,"default",(function(){return v}));var r=t(41),n=t.n(r),l=t(1),d=t(2),i=t(14),u=t(4),m=t(3),h=t(43),o=t(0),s=t.n(o),c=t(44);var f={temps:function(e){return e.value||0===e.value?e.value+" \xb0C":"in \xb0C"},pressure:function(e){return e.value||0===e.value?e.value+" mbar":"in mbar"},overpressure:function(e){return e.value||0===e.value?e.value+" bar\xfc":"in bar\xfc"},density:function(e){return e.value||0===e.value?e.value+" kg/Nm\xb3/h":"in kg/Nm\xb3/h"},millimeters:function(e){return e.value||0===e.value?e.value+" mm":"in mm"},meters:function(e){return e.value||0===e.value?e.value+" m":"in m"},volumeFlow:function(e){return e.value||0===e.value?e.value+" Nm\xb3/h":"in Nm\xb3/h"},weight:function(e){return e.value||0===e.value?e.value+" kg":"in kg"},massFlow:function(e){return e.value||0===e.value?e.value+" kg/h":"in kg/h"},rpm:function(e){return e.value||0===e.value?e.value+" U/min":"in U/min"},space:function(e){return e.value||0===e.value?e.value+" m\xb2":"in m\xb2"},solidsContent:function(e){return e.value||0===e.value?e.value+" g/kg":"in g/kg"},conveyingVolume:function(e){return e.value||0===e.value?e.value+" m\xb3/h":"in m\xb3/h"},protectionClass:function(e){return e.value||0===e.value?"IP"+e.value:"als Schutzartnummer"},power:function(e){return e.value||0===e.value?e.value+" kW":"in kW"},voltage:function(e){return e.value||0===e.value?e.value+" V":"in V"},current:function(e){return e.value||0===e.value?e.value+" A":"in A"},volume:function(e){return e.value||0===e.value?e.value+" m\xb3":"in m\xb3"},soundpower:function(e){return e.value||0===e.value?e.value+" dB(A)":"in dB"}};t(53),t(54),t(55);function p(e,a){return b.apply(this,arguments)}function b(){return(b=Object(h.a)(n.a.mark((function e(a,t){var r,l,d;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://tbf-db-backend.ep-projekte.de/updateTable.php",(r=new FormData).append("table",t),r.append("data",JSON.stringify(a)),l={method:"POST",body:r},e.prev=5,e.next=8,fetch("https://tbf-db-backend.ep-projekte.de/updateTable.php",l);case 8:if((d=e.sent).ok){e.next=13;break}throw Error(d.statusText);case 13:return e.abrupt("return",d);case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(5),console.log(e.t0);case 19:case"end":return e.stop()}}),e,null,[[5,16]])})))).apply(this,arguments)}var v=function(e){Object(u.a)(t,e);var a=Object(m.a)(t);function t(e){var r;return Object(l.a)(this,t),(r=a.call(this,e)).onGridReady=function(e){r.gridApi=e.api,r.gridColumnApi=e.columnApi;var a=[];r.gridColumnApi.getAllColumns().forEach((function(e){a.push(e.colId)})),e.columnApi.autoSizeColumns(a)},r.state={editType:"fullRow",defaultColDef:{sortable:!0,editable:!0,filter:!0,resizable:!0},table:r.props.table},r.onGridReady=r.onGridReady.bind(Object(i.a)(r)),r.dataChanged=r.dataChanged.bind(Object(i.a)(r)),r.getMaxTBFID=r.getMaxTBFID.bind(Object(i.a)(r)),r.onAddRow=r.onAddRow.bind(Object(i.a)(r)),r}return Object(d.a)(t,[{key:"getMaxTBFID",value:function(){var e=Object(h.a)(n.a.mark((function e(){var a=this;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch("https://tbf-db-backend.ep-projekte.de/getMaxTBFID.php").then((function(e){return e.json()})).then((function(e){a.setState({maxTBFID:parseInt(e)})}),(function(e){a.setState({error:e})})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"onAddRow",value:function(){var e=Object(h.a)(n.a.mark((function e(){var a=this;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.state.maxTBFID){e.next=3;break}return e.next=3,this.getMaxTBFID();case 3:this.setState({maxTBFID:this.state.maxTBFID+1},(function(){console.log(a.state.maxTBFID),a.gridApi.applyTransaction({add:[{TBF_ID:a.state.maxTBFID}]})}));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"dataChanged",value:function(e){var a=this;if("RI-TBF_SEF_Elektroangaben"===this.state.table){function t(){return(t=Object(h.a)(n.a.mark((function e(){var a,t;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://tbf-db-backend.ep-projekte.de/getTypicalMskValues.php");case 2:return a=e.sent,e.next=5,a.json();case 5:return t=e.sent,e.abrupt("return",t);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}console.log(e.data),function(){return t.apply(this,arguments)}().then((function(t){var r=t.find((function(a){return a[0]===e.data["Typical Nr. MSK"]}));r?(e.data["Anzahl AI"]||(e.data["Anzahl AI"]=parseInt(r[4])),e.data["Anzahl AO"]||(e.data["Anzahl AO"]=parseInt(r[5])),e.data["Anzahl DI"]||(e.data["Anzahl DI"]=parseInt(r[2])),e.data["Anzahl DO"]||(e.data["Anzahl DO"]=parseInt(r[3]))):e.data["Anzahl AI"]||e.data["Anzahl AO"]||e.data["Anzahl DI"]||e.data["Anzahl DO"]||(e.data["Anzahl AI"]=null,e.data["Anzahl AO"]=null,e.data["Anzahl DI"]=null,e.data["Anzahl DO"]=null),p(e.data,a.state.table)}))}else p(e.data,this.state.table)}},{key:"render",value:function(){var e,a=this.props.tableData,t=this.state.table,r=f,n=a.slice(0,1).map((function(e){return e.map((function(e){return e.cellEditor&&e.cellEditorParams?{headerName:e.headerName,field:e.field,editable:e.editable,cellEditor:e.cellEditor,cellEditorParams:e.cellEditorParams,refData:e.refData}:"Berechnungstemperatur"===e.headerName||"Betriebstemperatur"===e.headerName||"max. zul. Temperatur"===e.headerName||"Temperatur max"===e.headerName||"Temperatur min"===e.headerName||"Temperatur nom"===e.headerName?{headerName:e.headerName,field:e.field,editable:e.editable,valueFormatter:r.temps}:"Druck max hPa_a"===e.headerName||"Druck max Mpa_a"===e.headerName||"Druck min hPa_a"===e.headerName||"Druck min Mpa_a"===e.headerName||"Druck nom hPa_a"===e.headerName||"Druck nom Mpa_a"===e.headerName?{headerName:e.headerName,field:e.field,editable:e.editable,valueFormatter:r.pressure}:"Berechnungs\xfcberdruck"===e.headerName||"Betriebs\xfcberdruck"===e.headerName||"max. zul. Druck"===e.headerName?{headerName:e.headerName,field:e.field,editable:e.editable,valueFormatter:r.overpressure}:"Dichte max"===e.headerName||"Dichte min"===e.headerName||"Dichte nom"===e.headerName?{headerName:e.headerName,field:e.field,editable:e.editable,valueFormatter:r.density}:"Durchmesser"===e.headerName||"L\xe4nge [mm]"===e.headerName||"Radius"===e.headerName||"Wanddicke"===e.headerName?{headerName:e.headerName,field:e.field,editable:e.editable,valueFormatter:r.millimeters}:"Kabel 1 L\xe4nge"===e.headerName||"Kabel 2 L\xe4nge"===e.headerName||"Kabel 3 L\xe4nge"===e.headerName||"Kabel 4 L\xe4nge"===e.headerName||"Kabel 5 L\xe4nge"===e.headerName||"L\xe4nge [m]"===e.headerName||"Breite"===e.headerName||"H\xf6he"===e.headerName||"Rauml\xe4nge"===e.headerName||"Raumbreite"===e.headerName||"Raumh\xf6he"===e.headerName?{headerName:e.headerName,field:e.field,editable:e.editable,valueFormatter:r.meters}:"Volumenstrom max"===e.headerName||"Volumenstrom min"===e.headerName||"Volumenstrom nom"===e.headerName?{headerName:e.headerName,field:e.field,editable:e.editable,valueFormatter:r.volumeFlow}:"Massenstrom max"===e.headerName||"Massenstrom min"===e.headerName||"Massenstrom nom"===e.headerName?{headerName:e.headerName,field:e.field,editable:e.editable,valueFormatter:r.massFlow}:"Drehzahl"===e.headerName?{headerName:e.headerName,field:e.field,editable:e.editable,valueFormatter:r.rpm}:"Raumfl\xe4che"===e.headerName||"Fl\xe4che"===e.headerName?{headerName:e.headerName,field:e.field,editable:e.editable,valueFormatter:r.space}:"Feststoffgehalt max"===e.headerName||"Feststoffgehalt min"===e.headerName||"Feststoffgehalt nom"===e.headerName?{headerName:e.headerName,field:e.field,editable:e.editable,valueFormatter:r.solidsContent}:"F\xf6rdervolumen"===e.headerName?{headerName:e.headerName,field:e.field,editable:e.editable,valueFormatter:r.conveyingVolume}:"Gewicht"===e.headerName?{headerName:e.headerName,field:e.field,editable:e.editable,valueFormatter:r.weight}:"IP-Schutzart"===e.headerName?{headerName:e.headerName,field:e.field,editable:e.editable,valueFormatter:r.protectionClass}:"Nennleistung"===e.headerName?{headerName:e.headerName,field:e.field,editable:e.editable,valueFormatter:r.power}:"Nennspannung"===e.headerName?{headerName:e.headerName,field:e.field,editable:e.editable,valueFormatter:r.voltage}:"Nennstrom"===e.headerName?{headerName:e.headerName,field:e.field,editable:e.editable,valueFormatter:r.current}:"Raumvolumen"===e.headerName||"Volumen"===e.headerName?{headerName:e.headerName,field:e.field,editable:e.editable,valueFormatter:r.volume}:"Schallleistungspegel LWA"===e.headerName?{headerName:e.headerName,field:e.field,editable:e.editable,valueFormatter:r.soundpower}:{headerName:e.headerName,field:e.field,editable:e.editable}}))})),l=a.slice(1);return e="RI-TBF_SEF_Elektrokomponentenliste"===t?s.a.createElement("button",{className:"btn btn-outline-success mb-2",onClick:this.onAddRow},"Zeile hinzuf\xfcgen"):null,s.a.createElement("div",{id:"grid",className:"p-0 overflow-hidden w-100 h-100"},s.a.createElement("nav",{className:"navbar navbar-light bg-light"},s.a.createElement("h2",{className:"navbar-brand"},t),e),s.a.createElement("div",{className:"ag-theme-alpine",style:{height:"calc(100% - 60px)",width:"100%"}},s.a.createElement(c.AgGridReact,{columnDefs:n[0],defaultColDef:this.state.defaultColDef,rowData:l,editType:this.state.editType,pagination:!0,suppressFieldDotNotation:!0,onRowValueChanged:this.dataChanged,onGridReady:this.onGridReady})))}}]),t}(o.Component)}}]);
//# sourceMappingURL=4.deb51d6d.chunk.js.map